{"ast":null,"code":"var _jsxFileName = \"/Users/maxlee/Desktop/Web programming/midterm_miniblog/src/containers/Message_list.js\";\nimport React from 'react';\n\nclass Message_list extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onAddItem = n_message => {\n      this.setState(state => {\n        const n_messages = state.messages.push(n_message);\n        return {\n          n_messages\n        };\n      });\n    };\n\n    this.clear_all_posts = () => {\n      this.socket.emit(\"clear\");\n    };\n\n    this.state = {\n      messages: []\n    };\n    this.socket = props.socket;\n    this.socket.on(\"allMessage\", all_messages => {\n      all_messages.forEach(element => {\n        this.setState(state => {\n          const n_messages = state.messages.push(element);\n          return {\n            n_messages\n          };\n        });\n      });\n    });\n    this.socket.on(\"newMessage\", n_message => {\n      this.setState(state => {\n        const n_messages = state.messages.push(n_message);\n        return {\n          n_messages\n        };\n      });\n    });\n    this.socket.on(\"cleared\", () => {\n      this.setState({\n        messages: []\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, this.state.messages.map((item, id) => React.createElement(\"li\", {\n      key: id,\n      className: \"post_element\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, \"\\u6A19\\u984C: \", item.name), React.createElement(\"div\", {\n      className: \"post\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, item.message))), React.createElement(\"button\", {\n      className: \"clear_btn\",\n      onClick: this.clear_all_posts,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"Clear all\"));\n  }\n\n}\n\nexport default Message_list;","map":{"version":3,"sources":["/Users/maxlee/Desktop/Web programming/midterm_miniblog/src/containers/Message_list.js"],"names":["React","Message_list","Component","constructor","props","onAddItem","n_message","setState","state","n_messages","messages","push","clear_all_posts","socket","emit","on","all_messages","forEach","element","render","map","item","id","name","message"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,YAAN,SAA2BD,KAAK,CAACE,SAAjC,CAA2C;AAEvCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SA8BnBC,SA9BmB,GA8BNC,SAAD,IAAe;AACvB,WAAKC,QAAL,CAAcC,KAAK,IAAI;AACnB,cAAMC,UAAU,GAAGD,KAAK,CAACE,QAAN,CAAeC,IAAf,CAAoBL,SAApB,CAAnB;AACA,eAAO;AACHG,UAAAA;AADG,SAAP;AAGH,OALD;AAMH,KArCkB;;AAAA,SAuCnBG,eAvCmB,GAuCD,MAAM;AACpB,WAAKC,MAAL,CAAYC,IAAZ,CAAiB,OAAjB;AACH,KAzCkB;;AAEf,SAAKN,KAAL,GAAa;AACTE,MAAAA,QAAQ,EAAE;AADD,KAAb;AAIA,SAAKG,MAAL,GAAcT,KAAK,CAACS,MAApB;AACA,SAAKA,MAAL,CAAYE,EAAZ,CAAe,YAAf,EAA6BC,YAAD,IAAgB;AACxCA,MAAAA,YAAY,CAACC,OAAb,CAAqBC,OAAO,IAAI;AAC5B,aAAKX,QAAL,CAAcC,KAAK,IAAI;AACnB,gBAAMC,UAAU,GAAGD,KAAK,CAACE,QAAN,CAAeC,IAAf,CAAoBO,OAApB,CAAnB;AACA,iBAAO;AACHT,YAAAA;AADG,WAAP;AAGH,SALD;AAMH,OAPD;AAQH,KATD;AAUA,SAAKI,MAAL,CAAYE,EAAZ,CAAe,YAAf,EAA6BT,SAAD,IAAa;AACrC,WAAKC,QAAL,CAAcC,KAAK,IAAI;AACnB,cAAMC,UAAU,GAAGD,KAAK,CAACE,QAAN,CAAeC,IAAf,CAAoBL,SAApB,CAAnB;AACA,eAAO;AACHG,UAAAA;AADG,SAAP;AAGH,OALD;AAMH,KAPD;AAQA,SAAKI,MAAL,CAAYE,EAAZ,CAAe,SAAf,EAAyB,MAAI;AACzB,WAAKR,QAAL,CAAc;AAACG,QAAAA,QAAQ,EAAE;AAAX,OAAd;AACH,KAFD;AAGH;;AAcDS,EAAAA,MAAM,GAAG;AAEL,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKX,KAAL,CAAWE,QAAX,CAAoBU,GAApB,CAAwB,CAACC,IAAD,EAAOC,EAAP,KACrB;AAAI,MAAA,GAAG,EAAEA,EAAT;AAAa,MAAA,SAAS,EAAC,cAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAASD,IAAI,CAACE,IAAd,CAFJ,EAGI;AAAK,MAAA,SAAS,EAAG,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKF,IAAI,CAACG,OADV,CAHJ,CADH,CADL,EAUI;AAAQ,MAAA,SAAS,EAAC,WAAlB;AAA8B,MAAA,OAAO,EAAE,KAAKZ,eAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAVJ,CADJ;AAcH;;AA5DsC;;AA+D3C,eAAeX,YAAf","sourcesContent":["import React from 'react';\n\nclass Message_list extends React.Component {\n    \n    constructor(props) {\n        super(props);\n        this.state = {\n            messages: [\n            ],\n        };\n        this.socket = props.socket\n        this.socket.on(\"allMessage\",(all_messages)=>{\n            all_messages.forEach(element => {\n                this.setState(state => {\n                    const n_messages = state.messages.push(element);\n                    return {\n                        n_messages,\n                    };\n                });\n            });\n        })\n        this.socket.on(\"newMessage\",(n_message)=>{\n            this.setState(state => {\n                const n_messages = state.messages.push(n_message);\n                return {\n                    n_messages,\n                };\n            });\n        })\n        this.socket.on(\"cleared\",()=>{\n            this.setState({messages: []});\n        })\n    }\n\n    onAddItem = (n_message) => {\n        this.setState(state => {\n            const n_messages = state.messages.push(n_message);\n            return {\n                n_messages,\n            };\n        });\n    };\n    \n    clear_all_posts = () => {\n        this.socket.emit(\"clear\")\n    }\n    render() {\n        \n        return(\n            <ul>\n                {this.state.messages.map((item, id) => (\n                    <li key={id} className=\"post_element\">\n                        \n                        <h3>標題: {item.name}</h3>\n                        <div className = \"post\">\n                            {item.message}\n                        </div>\n                    </li>\n                ))}\n                <button className=\"clear_btn\" onClick={this.clear_all_posts}>Clear all</button>\n            </ul>\n        )\n    }\n}\n\nexport default Message_list;"]},"metadata":{},"sourceType":"module"}