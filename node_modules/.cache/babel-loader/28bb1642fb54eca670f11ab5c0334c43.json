{"ast":null,"code":"var _jsxFileName = \"/Users/maxlee/Desktop/Web programming/midterm_miniblog/src/containers/search.js\";\nimport React from 'react';\nimport socketIOClient from 'socket.io-client';\nexport default class Search extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.Start_Search = () => {\n      let input_item = document.getElementById('s1');\n      let input_value = input_item.value;\n      this.setState(state => {\n        const messages = state.messages;\n        const messages_toshow = [];\n        return {\n          messages,\n          messages_toshow\n        };\n      });\n      this.state.messages.forEach(element => {\n        this.setState(state => {\n          const messages = state.messages;\n          const m_show = state.messages_toshow;\n\n          if (element.name.match(input_value) || element.message.match(input_value)) {\n            m_show.push(element);\n          }\n\n          return {\n            messages,\n            m_show\n          };\n        });\n      });\n      input_item.value = '';\n    };\n\n    this.socket = socketIOClient(\"http://localhost:4040\");\n    this.state = {\n      messages: [],\n      messages_toshow: []\n    };\n    this.socket.on(\"allMessage\", all_messages => {\n      all_messages.forEach(element => {\n        this.setState(state => {\n          const n_messages = state.messages.push(element);\n          const m_show = state.messages_toshow;\n          return {\n            n_messages,\n            m_show\n          };\n        });\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      placeholder: \"請輸入查詢關鍵字\",\n      className: \"search_input\",\n      id: \"s1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      id: \"searchicon\",\n      onClick: this.Start_Search,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"https://cdn0.iconfinder.com/data/icons/very-basic-2-android-l-lollipop-icon-pack/24/search-512.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"search_home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, this.state.messages_toshow.map((item, id) => React.createElement(\"li\", {\n      key: id,\n      className: \"post_element\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"\\u6A19\\u984C: \", item.name), React.createElement(\"div\", {\n      className: \"post\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, item.message))))));\n  }\n\n}","map":{"version":3,"sources":["/Users/maxlee/Desktop/Web programming/midterm_miniblog/src/containers/search.js"],"names":["React","socketIOClient","Search","Component","constructor","props","Start_Search","input_item","document","getElementById","input_value","value","setState","state","messages","messages_toshow","forEach","element","m_show","name","match","message","push","socket","on","all_messages","n_messages","render","map","item","id"],"mappings":"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","sourcesContent":["import React from 'react';\nimport socketIOClient from 'socket.io-client';\n\nexport default class Search extends React.Component {\n    constructor(props) {\n        super(props);\n        this.socket = socketIOClient(\"http://localhost:4040\");\n        this.state = {\n            messages: [],\n            messages_toshow: [],\n        };\n        this.socket.on(\"allMessage\",(all_messages)=>{\n            all_messages.forEach(element => {\n                this.setState(state => {\n                    const n_messages = state.messages.push(element);\n                    const m_show = state.messages_toshow\n                    return {\n                        n_messages,\n                        m_show\n                    };\n                });\n            });\n        })\n    }\n    Start_Search = () =>{\n        let input_item = document.getElementById('s1')\n        let input_value = input_item.value\n        this.setState(state => {\n            const messages = state.messages;\n            const messages_toshow = [];\n            return {\n                messages,\n                messages_toshow\n            }\n        })\n        this.state.messages.forEach(element => {\n            this.setState(state => {\n                const messages = state.messages;\n                const m_show = state.messages_toshow\n                if (element.name.match(input_value) || element.message.match(input_value)){\n                    m_show.push(element)\n                }\n                return {\n                    messages,\n                    m_show\n                }\n            })\n        })\n        input_item.value = ''\n    }\n    render() {\n        return (\n            <div >\n                <input placeholder={\"請輸入查詢關鍵字\"} className=\"search_input\" id=\"s1\"/>\n                <button id=\"searchicon\" onClick={this.Start_Search}><img src=\"https://cdn0.iconfinder.com/data/icons/very-basic-2-android-l-lollipop-icon-pack/24/search-512.png\"></img></button>\n                <div className=\"search_home\">\n                    <ul>\n                        {this.state.messages_toshow.map((item, id) => (\n                            <li key={id} className=\"post_element\">\n                                \n                                <h3>標題: {item.name}</h3>\n                                <div className = \"post\">\n                                    {item.message}\n                                </div>\n                            </li>\n                        ))}\n                    </ul>\n                </div>\n            </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}